5.0) Поднять пять виртуальных машин (два роутера и 3 рабочие станции)
ФОТО 1
Сеть мы будем настраивать по этому фото
ФОТО 1.1
ФОТО закинуть фото на 5ом задании

5.1) Настройка адресов машин
1. Настроить конфигурации машин
ФОТО 2
ФОТО 3
ФОТО 4
ФОТО 5
ФОТО 6
И перезапустил
2. Проверить через ip -4 a и закинуть скриншоты
ФОТО 7
ФОТО 8
ФОТО 9
ФОТО 10
ФОТО 11
3. Пропинговать машины ws22 c ws21 and r1 c ws11
ФОТО 12
ФОТО 13

5.2) Включение переадресации IP-адресов
1. Для включения переадресации IP, выполните команду на роутерах: sudo sysctl -w net.ipv4.ip_forward=1
ФОТО 14
2. Добавить строку net.ipv4.ip_forward = 1 в файле /etc/sysctl.conf
ФОТО 15
ФОТО 16

5.3) Установка маршрута по-умолчанию
1. Добавить шлюз для рабочих станций ws11 ws21 ws22 и перезагрузить командой sudo netplan apply
ФОТО 17
ФОТО 18
ФОТО 19
2. Вызвать ip r и показать что добавился маршрут в таблицу маршрутизации
ФОТО 20 
3. Пропинговать ws11 c r2
ФОТО 21
ФОТО 22

5.4) Добавление статических маршрутов
1. добавить в r1 и r2 статистические маршруты
2. Показать таблицы с маршрутами
ФОТО 23
ФОТО 24
3. Запустить команды на ws11 
Ip r list 10.10.0.0/18 and ip r list 0.0.0.0/0
ФОТО 25
Для адреса *10.10.0.0/18* был выбран маршрут, отличный от *0.0.0.0/0* (он попадает под маршрут по-умолчанию), т.к. машина ` ws11 ` соединена с сетью *10.10.0.0/18* по своему IP-адресу *10.10.0.2*, для других адресов используется маршрут по умолчанию, который указан в файле *10.10.0.1*.

5.5) Построение списка маршрутизатором
1. на r1 запустить команду sudo tcpdump -tnv -i eth0 
2. На ws11 запустить команду 10.20.0.10
ФОТО 26
ФОТО 27
>Каждый пакет проходит на своем пути определенное количество узлов, пока достигнет своей цели. Причем, каждый пакет имеет свое время жизни. Это количество узлов, которые может пройти пакет перед тем, как он будет уничтожен. Этот параметр записывается в заголовке TTL, каждый маршрутизатор, через который будет проходить пакет уменьшает его на единицу. При TTL=0 пакет уничтожается, а отправителю отсылается сообщение Time Exceeded.

>Команда traceroute linux использует UDP пакеты. Она отправляет пакет с TTL=1 и смотрит адрес ответившего узла, дальше TTL=2, TTL=3 и так пока не достигнет цели. Каждый раз отправляется по три пакета и для каждого из них измеряется время прохождения. Пакет отправляется на случайный порт, который, скорее всего, не занят. Когда утилита traceroute получает сообщение от целевого узла о том, что порт недоступен трассировка считается завершенной.

5.6) Использование протокола ICMP при маршрутизации
1. Запустить команду sudo tcpdump -n -i enp0s8 icmp на перехват трафика enp0s8 
2. Пролиновать не существующий ip на ws11 командой Ping -c 1 10.30.0.111
ФОТО 28